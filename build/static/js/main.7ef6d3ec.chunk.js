(this["webpackJsonpcalculator-proto"]=this["webpackJsonpcalculator-proto"]||[]).push([[0],{46:function(t,e,s){},50:function(t,e,s){},58:function(t,e){},59:function(t,e,s){"use strict";s.r(e);var n=s(7),i=s(4),a=s.n(i),o=s(16),r=s.n(o),c=(s(46),s(11)),u=s(10),l=s(13),p=s(24),h=s(19),d=s(18),g=s(28),b=s(27),j=s(40),m=function(t){return Object(n.jsxs)("ul",{className:t.classNames.overlayOptions,children:[Object(n.jsx)("li",{children:"Insert:"}),Object(n.jsxs)("li",{children:[Object(n.jsx)("button",{onClick:t.onInsertLeft,children:"Left"}),Object(n.jsx)("button",{onClick:t.onInsertRight,children:"Right"})]}),Object(n.jsx)("li",{children:"Modify:"}),Object(n.jsxs)("li",{children:[Object(n.jsx)("button",{onClick:t.onEdit,children:"Edit"}),Object(n.jsx)("button",{onClick:t.onDelete,children:"Delete"})]})]})},f=function(t){return Object(n.jsx)(j.a,{placement:"top",trigger:["click","focus"],overlay:m(t),destroyTooltipOnHide:{keepParent:!1},children:Object(n.jsx)("button",{type:"button",className:"".concat(t.classNames.selectedTag," ").concat(t.tag.type?"".concat(t.classNames.highlighted,"-").concat(t.tag.type):""),title:t.editButtonText,children:Object(n.jsx)("span",{style:{pointerEvents:"none"},className:t.classNames.selectedTagName,children:t.tag.name})})})},v={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},O=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform"],x=function(t){Object(g.a)(s,t);var e=Object(b.a)(s);function s(t){var n;return Object(p.a)(this,s),(n=e.call(this,t)).state={inputWidth:null},n.input=a.a.createRef(),n.sizer=a.a.createRef(),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth())}},{key:"componentDidUpdate",value:function(t){var e=t.query,s=t.placeholder;e===this.props.query&&s===this.props.placeholder||this.updateInputWidth()}},{key:"copyInputStyles",value:function(){var t=this,e=window.getComputedStyle(this.input.current);O.forEach((function(s){t.sizer.current.style[s]=e[s]}))}},{key:"updateInputWidth",value:function(){var t;this.props.autoresize&&(t=Math.ceil(this.sizer.current.scrollWidth)+2),t!==this.state.inputWidth&&this.setState({inputWidth:t})}},{key:"render",value:function(){var t=this.props,e=t.id,s=t.query,i=t.ariaLabelText,a=t.placeholderText,o=t.expanded,r=t.classNames,u=t.inputAttributes,l=t.inputEventHandlers,p=t.index;return Object(n.jsxs)("div",{className:r.searchWrapper,children:[Object(n.jsx)("input",Object(c.a)(Object(c.a)(Object(c.a)({},u),l),{},{ref:this.input,value:s,placeholder:a,className:r.searchInput,role:"combobox","aria-autocomplete":"list","aria-label":i||a,"aria-owns":e,"aria-activedescendant":p>-1?"".concat(e,"-").concat(p):null,"aria-expanded":o,style:{width:this.state.inputWidth}})),Object(n.jsx)("div",{ref:this.sizer,style:v,children:s||a})]})}}]),s}(a.a.Component);function y(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function N(t,e){var s=new RegExp(y(e),"gi");return t.replace(s,"<mark>$&</mark>")}var T=function(t){var e=t.item,s=t.query;return Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:N(e.name,s)}})},S=function(t){Object(g.a)(s,t);var e=Object(b.a)(s);function s(){return Object(p.a)(this,s),e.apply(this,arguments)}return Object(d.a)(s,[{key:"onMouseDown",value:function(t,e){e.preventDefault(),this.props.addTag(t)}},{key:"render",value:function(){var t=this;if(!this.props.expanded||!this.props.options.length)return null;var e=this.props.suggestionComponent||T,s=this.props.options.map((function(s,i){var a="".concat(t.props.id,"-").concat(i),o=[];return t.props.index===i&&o.push(t.props.classNames.suggestionActive),s.disabled&&o.push(t.props.classNames.suggestionDisabled),Object(n.jsxs)("li",{id:a,role:"option",className:o.join(" "),"aria-disabled":!0===s.disabled,onMouseDown:t.onMouseDown.bind(t,s),children:[s.prefix?Object(n.jsx)("span",{className:t.props.classNames.suggestionPrefix,children:s.prefix}):null,s.disableMarkIt?s.name:Object(n.jsx)(e,{item:s,query:t.props.query})]},a)}));return Object(n.jsx)("div",{className:this.props.classNames.suggestions,children:Object(n.jsx)("ul",{role:"listbox",id:this.props.id,children:s})})}}]),s}(a.a.Component),k="Enter",P="Tab",I="Backspace",w="ArrowUp",_="Up",q="ArrowDown",C="Down",D="ArrowLeft",E="ArrowRight",A="Escape";function L(t,e){return t.findIndex((function(t){return(s=e,new RegExp("^".concat(y(s),"$"),"i")).test(t.name);var s}))}function B(){if(this.state.query.length>=this.props.minQueryLength){var t=L(this.state.options,this.state.query),e=-1===this.state.index?t:this.state.index;e>-1&&this.state.options[e]?this.addTag(this.state.options[e]):this.props.allowNew&&this.addTag({name:this.state.query}),this.state.inputPosition>-1&&!this.state.isInsertion&&this.onBlur()}}function R(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index<=0?e:this.state.index-1})}function F(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index>=e?0:this.state.index+1})}function W(){var t=this;this.state.query.length||(-1===this.state.inputPosition?this.deleteTag(this.props.tags.length-1):this.state.inputPosition>0&&this.state.isInsertion&&(this.deleteTag(this.state.inputPosition-1),this.setState({inputPosition:this.state.inputPosition-1},(function(){t.input.current.input.current.focus()}))))}function z(){-1!==this.state.inputPosition&&this.onBlur()}function M(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=0;-1===this.state.inputPosition?e=this.props.tags.length-1:this.state.inputPosition>0&&(e=this.state.inputPosition-1),this.setState({inputPosition:e,isInsertion:!0},(function(){t.input.current.input.current.focus()}))}}function H(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=-1;-1===this.state.inputPosition||this.state.inputPosition+1===this.props.tags.length?e=-1:this.state.inputPosition<this.props.tags.length-1&&(e=this.state.inputPosition+1),this.setState({inputPosition:e,isInsertion:-1!==e},(function(){t.input.current.input.current.focus()}))}}function Q(t,e){var s;return 0===(s=t.suggestionsTransform?t.suggestionsTransform(e.query,t.suggestions):t.suggestions.filter((function(s){return t.suggestionsFilter(s,e.query)}))).length&&t.noSuggestionsText&&!t.newTagPrefix&&s.push({id:0,name:t.noSuggestionsText,disabled:!0,disableMarkIt:!0}),s=s.slice(0,t.maxSuggestionsLength),t.allowNew&&t.newTagPrefix&&L(s,e.query)<0&&s.push({id:0,name:e.query,prefix:t.newTagPrefix}),s}var $=function(t){Object(g.a)(s,t);var e=Object(b.a)(s);function s(t){var n;return Object(p.a)(this,s),(n=e.call(this,t)).state={query:"",focused:!1,index:-1,inputPosition:-1,isInsertion:!1},n.inputEventHandlers={onChange:function(){},onBlur:n.onBlur.bind(Object(h.a)(n)),onFocus:n.onFocus.bind(Object(h.a)(n)),onInput:n.onInput.bind(Object(h.a)(n)),onKeyDown:n.onKeyDown.bind(Object(h.a)(n))},n.container=a.a.createRef(),n.input=a.a.createRef(),n.suggestions=a.a.createRef(),n}return Object(d.a)(s,null,[{key:"getDerivedStateFromProps",value:function(t,e){return e.prevQuery!==e.query||e.prevSuggestions!==t.suggestions?{prevQuery:e.query,prevSuggestions:t.suggestions,options:Q(t,e),autocompletion:t.suggestions.filter((function(t){return t.autocomplete}))}:null}}]),Object(d.a)(s,[{key:"componentDidUpdate",value:function(t,e){t.tags!==this.props.tags&&(this.input.current.input.current.focus(),0===this.props.tags.length&&this.setState({index:-1,inputPosition:-1,isInsertion:!1}))}},{key:"onInput",value:function(t){var e=this,s=t.target.value,n=s.trim();if(this.props.onInput&&this.props.onInput(),-1===this.state.inputPosition||this.state.isInsertion){var i=this.state.autocompletion.find((function(t){return n.includes(t.name)}));if(i){var a=n.replace(i.name,"").trim();if(i.name.length===n.length)if(this.state.isInsertion){var o=this.props.tags;o.splice(this.state.inputPosition,0,i),this.props.addTags(Object(u.a)(o)),this.setState({inputPosition:this.state.inputPosition+1})}else this.props.addTags([].concat(Object(u.a)(this.props.tags),[i]));else if(this.props.validation(a)){var r={name:a};if(this.state.isInsertion){var c=this.props.tags;c.splice(this.state.inputPosition,0,r,i),this.props.addTags(Object(u.a)(c)),this.setState({inputPosition:this.state.inputPosition+2})}else this.props.addTags([].concat(Object(u.a)(this.props.tags),[r,i]))}else this.props.onError(a);setTimeout((function(){e.clearInput()}),0)}}n.length===this.state.query.length+1&&this.props.delimiters.indexOf(n.slice(-1))>-1?B.call(this):s!==this.state.query&&this.setState({query:s})}},{key:"onKeyDown",value:function(t){this.props.delimiters.indexOf(t.key)>-1&&((this.state.query||this.state.index>-1)&&t.preventDefault(),B.call(this)),t.key===I&&this.props.allowBackspace&&W.call(this,t),t.key!==w&&t.key!==_||R.call(this,t),t.key!==q&&t.key!==C||F.call(this,t),t.key===A&&z.call(this,t),t.key===D&&M.call(this,t),t.key===E&&H.call(this,t)}},{key:"onClick",value:function(t){document.activeElement!==t.target&&this.input.current.input.current.focus()}},{key:"onBlur",value:function(){var t=this;this.setState({focused:!1,index:-1}),this.props.onBlur&&this.props.onBlur(),this.props.addOnBlur&&B.call(this),-1!==this.state.inputPosition&&(String(this.props.tags[this.state.inputPosition].name)!==String(this.state.query)&&""!==String(this.state.query).trim()?this.addTag({name:this.state.query}):this.setState({inputPosition:-1,isInsertion:!1},(function(){t.clearInput()})))}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"onDeleteTag",value:function(t,e){if(this.container.current){var s=this.container.current.querySelectorAll("a,button,input"),n=Array.prototype.findIndex.call(s,(function(t){return t===e.currentTarget})),i=s[n-1]||s[n+1];i&&i.focus()}this.deleteTag(t)}},{key:"addTag",value:function(t){var e=this;if(!t.disabled&&("function"!==typeof this.props.onValidate||this.props.onValidate(t))){-1!==this.state.inputPosition&&(this.state.isInsertion?this.setState({inputPosition:this.state.inputPosition+1}):this.setState({inputPosition:-1}));var s=t.id?t.name.trim():t.name.trim().toLowerCase();if(t.id||this.props.validation(s)){var n=Object(c.a)(Object(c.a)({},t),{},{name:s});if(this.state.inputPosition>-1){var i=this.props.tags;i.splice(this.state.inputPosition,this.state.isInsertion?0:1,n),this.props.addTags(Object(u.a)(i))}else this.props.addTags([].concat(Object(u.a)(this.props.tags),[n]))}else this.props.onError(s),this.setState({inputPosition:-1,isInsertion:!1},(function(){e.input.current.input.current.focus()}));this.props.onAddition&&this.props.onAddition(t,this.state.inputPosition,this.state.isInsertion),this.clearInput()}}},{key:"deleteTag",value:function(t){var e=this.props.tags;e.splice(t,1),this.props.addTags(Object(u.a)(e)),this.props.onDelete&&this.props.onDelete(t)}},{key:"clearInput",value:function(){this.setState({query:"",index:-1})}},{key:"onInsert",value:function(t){var e=this;this.setState({query:"",inputPosition:this.props.tags.length<=t?-1:t,isInsertion:this.props.tags.length>=t},(function(){e.input.current.input.current.focus()}))}},{key:"onEditTag",value:function(t){var e=this;this.setState({query:this.props.tags[t].name,inputPosition:t},(function(){e.input.current.input.current.focus()}))}},{key:"renderInput",value:function(t){var e=this.state.focused&&this.state.query.length>=this.props.minQueryLength;return Object(n.jsxs)("div",{className:this.props.classNames.search,children:[Object(n.jsx)(x,Object(c.a)(Object(c.a)({},this.state),{},{id:this.props.id,ref:this.input,classNames:this.props.classNames,inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,autoresize:this.props.autoresize,expanded:e,placeholderText:this.props.placeholderText,ariaLabelText:this.props.ariaLabelText})),Object(n.jsx)(S,Object(c.a)(Object(c.a)({},this.state),{},{id:this.props.id,ref:this.suggestions,classNames:this.props.classNames,expanded:e,addTag:this.addTag.bind(this),suggestionComponent:this.props.suggestionComponent}))]},t)}},{key:"renderTagComponent",value:function(t,e){var s=this.props.tagComponent||f;return Object(n.jsx)(s,{tag:t,editButtonText:this.props.editButtonText,classNames:this.props.classNames,onDelete:this.onDeleteTag.bind(this,e),onEdit:this.onEditTag.bind(this,e),onInsertLeft:this.onInsert.bind(this,e),onInsertRight:this.onInsert.bind(this,e+1)},e)}},{key:"render",value:function(){var t=this,e=[this.props.classNames.root];return this.state.focused&&e.push(this.props.classNames.rootFocused),Object(n.jsxs)("div",{ref:this.container,className:e.join(" "),onClick:this.onClick.bind(this),children:[Object(n.jsx)("div",{className:this.props.classNames.selected,"aria-relevant":"additions removals","aria-live":"polite",children:this.props.tags.map((function(e,s){return t.state.inputPosition===s&&t.state.isInsertion?Object(n.jsxs)(i.Fragment,{children:[t.renderInput(),t.renderTagComponent(e)]},s):-1===t.state.inputPosition?t.renderTagComponent(e,s):t.state.inputPosition===s?t.renderInput(s):t.renderTagComponent(e,s)}))}),this.state.inputPosition<0&&this.renderInput()]})}}]),s}(a.a.Component);$.defaultProps={id:"ReactTags",tags:[],placeholderText:" ",editButtonText:"Click to edit value",noSuggestionsText:null,suggestions:[],suggestionsFilter:function(t,e){return new RegExp("(?:^|\\s)".concat(y(e)),"i").test(t.name)},suggestionsTransform:null,autoresize:!0,classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchWrapper:"react-tags__search-wrapper",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled",suggestionPrefix:"react-tags__suggestion-prefix",overlayOptions:"react-tags__overlay_options",highlighted:"react-tags__is-highlighted"},delimiters:[P,k],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,newTagPrefix:null,allowBackspace:!0,addOnBlur:!1,tagComponent:null,suggestionComponent:null,inputAttributes:{}};var J=$,U=s(63),K=s(62),V=(s(50),1),G=2,X=[{id:"c_1",name:"(",autocomplete:!0},{id:"c_2",name:")",autocomplete:!0},{id:"c_3",name:"+",autocomplete:!0},{id:"c_4",name:"-",autocomplete:!0},{id:"c_5",name:"*",longName:"* (multiplication)",autocomplete:!0},{id:"c_6",name:"/",longName:"/ (division)",autocomplete:!0},{id:"c_7",name:"^",longName:"^ (power)",autocomplete:!0},{id:"c_8",name:"sqrt(",longName:"sqrt(x) - square root",autoclose:1}],Y=[{id:"r_1",name:">",longName:"> (greater than)"},{id:"r_2",name:"<",longName:"< (less than)"},{id:"r_3",name:">=",longName:">= (greater than or equal to)",autocomplete:!0},{id:"r_4",name:"<=",longName:"<= (less than or equal to)",autocomplete:!0},{id:"r_5",name:"==",longName:"== (is equal)",autocomplete:!0},{id:"r_6",name:"!=",longName:"!= (not equal)",autocomplete:!0},{id:"r_7",name:"contains(",longName:"contains(x, y) - contains y in x",autoclose:3},{id:"r_8",name:"and",longName:"logical AND"},{id:"r_9",name:"or",longName:"logical OR"},{id:"r_10",name:"not",longName:"logical NOT"}],Z=[].concat(X,Y,[{id:"s_1",name:","}]).reduce((function(t,e){return t.push(e.name),t}),[]),tt=Object(U.a)(K.a),et=function(t,e,s){var n=t.map((function(t){return String(t.value).trim().toLowerCase()}));return n[0].includes(n[1])};et.rawArgs=!0,tt.import({contains:et});var st=function(){var t=Object(i.useState)([]),e=Object(l.a)(t,2),s=e[0],a=e[1],o=Object(i.useState)([].concat(X)),r=Object(l.a)(o,2),p=r[0],h=r[1],d=Object(i.useState)(V),g=Object(l.a)(d,2),b=g[0],j=g[1],m=Object(i.useState)({result:null,error:null}),f=Object(l.a)(m,2),v=f[0],O=f[1],x=Object(i.useState)([{type:2,name:"Label",id:1},{type:3,name:"Lead Name",id:2}]),y=Object(l.a)(x,2),N=y[0],T=y[1],S=Object(i.useState)({name:"",value:""}),k=Object(l.a)(S,2),P=k[0],I=k[1],w=Object(i.useState)(0),_=Object(l.a)(w,2),q=_[0],C=_[1];Object(i.useEffect)((function(){var t=s.map((function(t){var e,s=null!==(e=t.value)&&void 0!==e?e:t.name;return Z.includes(s)||!Number.isNaN(Number(s))?s:"'".concat(s,"'")})).join(" ");try{b===G&&0===s.length?O({result:!0,error:null}):O({result:tt.evaluate(t),error:null})}catch(e){O({result:null,error:e.message})}}),[b,s]),Object(i.useEffect)((function(){b===V&&h([].concat(X)),b===G&&h([].concat(X,Y)),a([])}),[b]),Object(i.useEffect)((function(){var t=p.reduce((function(t,e){return e.autoclose&&e.autoclose>t?e.autoclose:t}),0);C(t)}),[p]);var D=Object(i.useCallback)((function(t){return b!==V||RegExp(/^[+-]?\d+(\.\d+)?$/).test(t)}),[b]),E=function(t){return function(e){var n=t.find((function(t){return String(t.id)===String(e.target.value)}));if(n){var i=n.name.trim();n.id||D(n)?a([].concat(Object(u.a)(s),[Object(c.a)(Object(c.a)({},n),{},{name:i})])):A(i)}}},A=function(t){O({result:null,error:'"'.concat(t,'" input is not allowed. Numbers (integers/floats) only.')})};return Object(n.jsxs)("div",{className:"App-cont",children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:["Select node type: \xa0",Object(n.jsxs)("select",{value:b,name:"node_type",onChange:function(t){j(Number(t.target.value))},children:[Object(n.jsx)("option",{value:V,children:"Advanced Calculator"}),Object(n.jsx)("option",{value:G,children:"Advanced Router"})]}),Object(n.jsx)("p",{children:"Add dynamic variable:"}),Object(n.jsx)("input",{value:P.name,type:"text",placeholder:"name",onChange:function(t){I((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:t.target.value})}))}}),Object(n.jsx)("input",{value:P.value,type:"text",placeholder:"default value",onChange:function(t){I((function(e){return Object(c.a)(Object(c.a)({},e),{},{value:t.target.value})}))}}),Object(n.jsx)("button",{onClick:function(){T((function(t){return[].concat(Object(u.a)(t),[{id:Date.now(),name:P.name,value:P.value,type:1}])})),I({name:"",value:""})},children:"Add"})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:["Add \xa0",Object(n.jsxs)("select",{value:"default",name:"operations",onChange:E(p),children:[Object(n.jsx)("option",{value:"default",disabled:!0,children:"Operations"}),p.map((function(t){return Object(n.jsx)("option",{value:t.id,children:t.longName||t.name},t.id)}))]}),0!==N.length&&Object(n.jsxs)("select",{value:"default",name:"variables",onChange:E(N),children:[Object(n.jsx)("option",{value:"default",disabled:!0,children:"Variables"}),N.map((function(t){return Object(n.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object(n.jsx)("br",{}),Object(n.jsx)(J,{allowNew:!0,minQueryLength:1,suggestions:[].concat(Object(u.a)(p),Object(u.a)(N)),tags:s,addTags:function(t){if(t.length>s.length)for(var e=t.length>q?q:t.length,n=0;n<=e;n++){var i;if((null===(i=t[t.length-1-n])||void 0===i?void 0:i.autoclose)===n){a([].concat(Object(u.a)(t),[{id:"c_2",name:")",autocomplete:!0}]));break}a(Object(u.a)(t))}else a(Object(u.a)(t))},validation:D,onError:A}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Result: "}),String(b===G?!!v.result:v.result),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Error: "}),String(v.error)]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Data to save in DB:"}),Object(n.jsx)("code",{children:JSON.stringify(s.map((function(t){var e=t.id,s=t.type,n=t.name;return Number.isInteger(Number(e))?{id:e,type:s}:n})))})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Raw state:"})," ",Object(n.jsx)("code",{children:"["}),Object(n.jsxs)("ul",{style:{listStyle:"none",margin:0,padding:0},children:[s.map((function(t,e){return Object(n.jsx)("li",{style:{marginLeft:10},children:Object(n.jsx)("code",{children:JSON.stringify(t)})},"".concat(t.name+e))})),Object(n.jsx)("code",{children:"]"})]})]})]})},nt=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,64)).then((function(e){var s=e.getCLS,n=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;s(t),n(t),i(t),a(t),o(t)}))};r.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(st,{})}),document.getElementById("root")),nt()}},[[59,1,2]]]);
//# sourceMappingURL=main.7ef6d3ec.chunk.js.map