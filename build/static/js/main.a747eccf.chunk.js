(this["webpackJsonpcalculator-proto"]=this["webpackJsonpcalculator-proto"]||[]).push([[0],{36:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},49:function(e,t){},50:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n(0),a=n.n(i),o=n(7),r=n.n(o),c=(n(36),n(4)),u=n(3),l=n(8),p=n(15),d=n(16),h=n(10),g=n(19),b=n(18),j=n(29),f=(n(40),function(e){return Object(s.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,textAlign:"center"},children:[Object(s.jsx)("li",{children:"Insert:"}),Object(s.jsxs)("li",{style:{paddingBottom:5},children:[Object(s.jsx)("button",{onClick:e.onInsert,children:"Left"}),Object(s.jsx)("button",{onClick:e.onInsert,children:"Right"})]}),Object(s.jsx)("li",{children:"Modify:"}),Object(s.jsxs)("li",{children:[Object(s.jsx)("button",{onClick:e.onEdit,children:"Edit"}),Object(s.jsx)("button",{onClick:e.onDelete,children:"Delete"})]})]})}),m=function(e){return Object(s.jsx)(j.a,{placement:"top",trigger:["click"],overlay:f(e),destroyTooltipOnHide:{keepParent:!1},children:Object(s.jsx)("button",{type:"button",className:e.classNames.selectedTag,title:e.removeButtonText,children:Object(s.jsx)("span",{className:e.classNames.selectedTagName,children:e.tag.name})})})},v={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},x=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform"],O=function(e){Object(g.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(p.a)(this,n),(s=t.call(this,e)).state={inputWidth:null},s.input=a.a.createRef(),s.sizer=a.a.createRef(),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth())}},{key:"componentDidUpdate",value:function(e){var t=e.query,n=e.placeholder;t===this.props.query&&n===this.props.placeholder||this.updateInputWidth()}},{key:"copyInputStyles",value:function(){var e=this,t=window.getComputedStyle(this.input.current);x.forEach((function(n){e.sizer.current.style[n]=t[n]}))}},{key:"updateInputWidth",value:function(){var e;this.props.autoresize&&(e=Math.ceil(this.sizer.current.scrollWidth)+2),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.query,i=e.ariaLabelText,a=e.placeholderText,o=e.expanded,r=e.classNames,c=e.inputAttributes,l=e.inputEventHandlers,p=e.index;return Object(s.jsxs)("div",{className:r.searchWrapper,children:[Object(s.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({},c),l),{},{ref:this.input,value:n,placeholder:a,className:r.searchInput,role:"combobox","aria-autocomplete":"list","aria-label":i||a,"aria-owns":t,"aria-activedescendant":p>-1?"".concat(t,"-").concat(p):null,"aria-expanded":o,style:{width:this.state.inputWidth}})),Object(s.jsx)("div",{ref:this.sizer,style:v,children:n||a})]})}}]),n}(a.a.Component);function y(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function T(e,t){var n=new RegExp(y(t),"gi");return e.replace(n,"<mark>$&</mark>")}var k=function(e){var t=e.item,n=e.query;return Object(s.jsx)("span",{dangerouslySetInnerHTML:{__html:T(t.name,n)}})},w=function(e){Object(g.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"onMouseDown",value:function(e,t){t.preventDefault(),this.props.addTag(e,this.props.inputPosition)}},{key:"render",value:function(){var e=this;if(!this.props.expanded||!this.props.options.length)return null;var t=this.props.suggestionComponent||k,n=this.props.options.map((function(n,i){var a="".concat(e.props.id,"-").concat(i),o=[];return e.props.index===i&&o.push(e.props.classNames.suggestionActive),n.disabled&&o.push(e.props.classNames.suggestionDisabled),Object(s.jsxs)("li",{id:a,role:"option",className:o.join(" "),"aria-disabled":!0===n.disabled,onMouseDown:e.onMouseDown.bind(e,n),children:[n.prefix?Object(s.jsx)("span",{className:e.props.classNames.suggestionPrefix,children:n.prefix}):null,n.disableMarkIt?n.name:Object(s.jsx)(t,{item:n,query:e.props.query})]},a)}));return Object(s.jsx)("div",{className:this.props.classNames.suggestions,children:Object(s.jsx)("ul",{role:"listbox",id:this.props.id,children:n})})}}]),n}(a.a.Component),N="Enter",S="Tab",I="Backspace",C="ArrowUp",q="Up",P="ArrowDown",D="Down",B="Escape";function E(e,t){return e.findIndex((function(e){return(n=t,new RegExp("^".concat(y(n),"$"),"i")).test(e.name);var n}))}function A(){if(this.state.query.length>=this.props.minQueryLength){var e=E(this.state.options,this.state.query),t=-1===this.state.index?e:this.state.index;t>-1&&this.state.options[t]?this.addTag(this.state.options[t],this.state.inputPosition):this.props.allowNew&&this.addTag({name:this.state.query},this.state.inputPosition),this.state.inputPosition>-1&&this.onBlur()}}function _(e){e.preventDefault();var t=this.state.options.length-1;this.setState({index:this.state.index<=0?t:this.state.index-1})}function F(e){e.preventDefault();var t=this.state.options.length-1;this.setState({index:this.state.index>=t?0:this.state.index+1})}function L(){this.state.query.length||-1===this.state.inputPosition&&this.deleteTag(this.props.tags.length-1)}function R(){-1!==this.state.inputPosition&&this.onBlur()}function W(e,t){var n;return 0===(n=e.suggestionsTransform?e.suggestionsTransform(t.query,e.suggestions):e.suggestions.filter((function(n){return e.suggestionsFilter(n,t.query)}))).length&&e.noSuggestionsText&&!e.newTagPrefix&&n.push({id:0,name:e.noSuggestionsText,disabled:!0,disableMarkIt:!0}),n=n.slice(0,e.maxSuggestionsLength),e.allowNew&&e.newTagPrefix&&E(n,t.query)<0&&n.push({id:0,name:t.query,prefix:e.newTagPrefix}),n}var z=function(e){Object(g.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(p.a)(this,n),(s=t.call(this,e)).state={query:"",focused:!1,index:-1,inputPosition:-1},s.inputEventHandlers={onChange:function(){},onBlur:s.onBlur.bind(Object(h.a)(s)),onFocus:s.onFocus.bind(Object(h.a)(s)),onInput:s.onInput.bind(Object(h.a)(s)),onKeyDown:s.onKeyDown.bind(Object(h.a)(s))},s.container=a.a.createRef(),s.input=a.a.createRef(),s.suggestions=a.a.createRef(),s}return Object(d.a)(n,[{key:"onInput",value:function(e){var t=e.target.value;this.props.onInput&&-1===this.state.inputPosition&&this.props.onInput(t),t.length===this.state.query.length+1&&this.props.delimiters.indexOf(t.slice(-1))>-1?A.call(this):t!==this.state.query&&this.setState({query:t})}},{key:"onKeyDown",value:function(e){this.props.delimiters.indexOf(e.key)>-1&&((this.state.query||this.state.index>-1)&&e.preventDefault(),A.call(this)),e.key===I&&this.props.allowBackspace&&L.call(this,e),e.key!==C&&e.key!==q||_.call(this,e),e.key!==P&&e.key!==D||F.call(this,e),e.key===B&&R.call(this,e)}},{key:"onClick",value:function(e){document.activeElement!==e.target&&this.input.current.input.current.focus()}},{key:"onBlur",value:function(){var e=this;this.setState({focused:!1,index:-1}),this.props.onBlur&&this.props.onBlur(),this.props.addOnBlur&&A.call(this),-1!==this.state.inputPosition&&(String(this.props.tags[this.state.inputPosition].name)!==String(this.state.query)&&""!==String(this.state.query).trim()?this.addTag({name:this.state.query},this.state.inputPosition):this.setState({inputPosition:-1},(function(){e.clearInput()})))}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"onDeleteTag",value:function(e,t){if(this.container.current){var n=this.container.current.querySelectorAll("a,button,input"),s=Array.prototype.findIndex.call(n,(function(e){return e===t.currentTarget})),i=n[s-1]||n[s+1];i&&i.focus()}this.deleteTag(e)}},{key:"addTag",value:function(e,t){e.disabled||("function"!==typeof this.props.onValidate||this.props.onValidate(e))&&(-1!==this.state.inputPosition&&this.setState({inputPosition:-1}),this.props.onAddition(e,t),this.clearInput())}},{key:"deleteTag",value:function(e){this.props.onDelete(e)}},{key:"clearInput",value:function(){this.setState({query:"",index:-1})}},{key:"onClickTag",value:function(e,t){}},{key:"onEditTag",value:function(e,t){var n=this;this.setState({query:this.props.tags[e].name,inputPosition:e},(function(){n.input.current.input.current.focus()}))}},{key:"renderInput",value:function(e){var t=this.state.focused&&this.state.query.length>=this.props.minQueryLength;return Object(s.jsxs)("div",{className:this.props.classNames.search,children:[Object(s.jsx)(O,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.input,classNames:this.props.classNames,inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,autoresize:this.props.autoresize,expanded:t,placeholderText:this.props.placeholderText,ariaLabelText:this.props.ariaLabelText})),Object(s.jsx)(w,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.suggestions,classNames:this.props.classNames,expanded:t,addTag:this.addTag.bind(this),onBlur:this.onBlur.bind(this),suggestionComponent:this.props.suggestionComponent}))]},e)}},{key:"render",value:function(){var e=this,t=this.props.tagComponent||m,n=[this.props.classNames.root];return this.state.focused&&n.push(this.props.classNames.rootFocused),Object(s.jsxs)("div",{ref:this.container,className:n.join(" "),onClick:this.onClick.bind(this),children:[Object(s.jsx)("div",{className:this.props.classNames.selected,"aria-relevant":"additions removals","aria-live":"polite",children:this.props.tags.map((function(n,i){return-1===e.state.inputPosition?Object(s.jsx)(t,{tag:n,removeButtonText:e.props.removeButtonText,classNames:e.props.classNames,onDelete:e.onDeleteTag.bind(e,i),onEdit:e.onEditTag.bind(e,i),onInsert:e.onClickTag.bind(e,i)},i):e.state.inputPosition===i?e.renderInput(i):Object(s.jsx)(t,{tag:n,removeButtonText:e.props.removeButtonText,classNames:e.props.classNames,onDelete:e.onDeleteTag.bind(e,i),onEdit:e.onEditTag.bind(e,i),onInsert:e.onClickTag.bind(e,i)},i)}))}),this.state.inputPosition<0&&this.renderInput()]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevQuery!==t.query||t.prevSuggestions!==e.suggestions?{prevQuery:t.query,prevSuggestions:e.suggestions,options:W(e,t)}:null}}]),n}(a.a.Component);z.defaultProps={id:"ReactTags",tags:[],placeholderText:"Add new tag",removeButtonText:"Click to remove tag",noSuggestionsText:null,suggestions:[],suggestionsFilter:function(e,t){return new RegExp("(?:^|\\s)".concat(y(t)),"i").test(e.name)},suggestionsTransform:null,autoresize:!0,classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchWrapper:"react-tags__search-wrapper",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled",suggestionPrefix:"react-tags__suggestion-prefix"},delimiters:[S,N],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,newTagPrefix:null,allowBackspace:!0,addOnBlur:!1,tagComponent:null,suggestionComponent:null,inputAttributes:{}};var M=z,H=n(52),Q=(n(41),[{id:1,name:"(",autocomplete:!0},{id:2,name:")",autocomplete:!0},{id:3,name:"+",autocomplete:!0},{id:4,name:"-",autocomplete:!0},{id:5,name:"*",autocomplete:!0},{id:6,name:"/",autocomplete:!0},{id:7,name:"^",autocomplete:!0},{id:8,name:"sqrt("}]),V=Q.filter((function(e){return e.autocomplete})),$=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)({error:null,value:null}),r=Object(l.a)(o,2),p=r[0],d=r[1],h=Object(i.useState)([]),g=Object(l.a)(h,2),b=g[0],j=g[1],f=Object(i.useState)({name:"",value:""}),m=Object(l.a)(f,2),v=m[0],x=m[1],O=Object(i.useRef)();Object(i.useEffect)((function(){var e=n.map((function(e){return e.defaultValue||e.name}));try{var t=Object(H.a)(e.join("")).compile();d({value:t.evaluate(),error:null})}catch(s){d({value:null,error:s.message})}}),[n]);var y=function(e){return RegExp(/^[+-]?\d+(\.\d+)?$/).test(e)},T=function(e,t){var s=e.name.trim();e.id||y(s)?t>-1?(n.splice(t,1,Object(u.a)(Object(u.a)({},e),{},{name:s})),a(Object(c.a)(n))):a([].concat(Object(c.a)(n),[Object(u.a)(Object(u.a)({},e),{},{name:s})])):d({value:null,error:'"'.concat(s,'" input is not allowed. Numbers (integers/floats) only.')})},k=function(e){return function(t){var n,s,i,a,o,r=e.find((function(e){return String(e.id)===String(t.target.value)}));r&&T(r),null===O||void 0===O||null===(n=O.current)||void 0===n||null===(s=n.input)||void 0===s||null===(i=s.current)||void 0===i||null===(a=i.input)||void 0===a||null===(o=a.current)||void 0===o||o.focus()}};return Object(s.jsxs)("div",{className:"App-cont",children:[Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Add dynamic variable:"}),Object(s.jsx)("input",{value:v.name,type:"text",placeholder:"name",onChange:function(e){x((function(t){return Object(u.a)(Object(u.a)({},t),{},{name:e.target.value})}))}}),Object(s.jsx)("input",{value:v.value,type:"text",placeholder:"value",onChange:function(e){x((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e.target.value})}))}}),Object(s.jsx)("button",{onClick:function(){j((function(e){return[].concat(Object(c.a)(e),[{id:Date.now(),name:v.name,defaultValue:v.value}])})),x({name:"",value:""})},children:"Add"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:"Calculator node:"}),Object(s.jsxs)("div",{children:["Add \xa0",Object(s.jsxs)("select",{value:"default",name:"operations",onChange:k(Q),children:[Object(s.jsx)("option",{value:"default",disabled:!0,children:"Operations"}),Q.map((function(e){return Object(s.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),0!==b.length&&Object(s.jsxs)("select",{value:"default",name:"variables",onChange:k(b),children:[Object(s.jsx)("option",{value:"default",disabled:!0,children:"Variables"}),b.map((function(e){return Object(s.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(s.jsx)("br",{}),Object(s.jsx)(M,{allowNew:!0,minQueryLength:1,onAddition:T,onDelete:function(e){var t=n.slice(0);t.splice(e,1),a(t)},placeholderText:"Type an expression",ref:O,suggestions:[].concat(Q,Object(c.a)(b)),tags:n,onInput:function(e,t){var s=e.trim(),i=V.find((function(e){return s.includes(e.name)}));if(i){var o=s.replace(i.name,"").trim();i.name.length===s.length?a([].concat(Object(c.a)(n),[i])):y(o)?a([].concat(Object(c.a)(n),[{name:o},i])):d({value:null,error:'"'.concat(o,'" input is not allowed. Numbers (integers/floats) only.')}),setTimeout((function(){O.current.clearInput()}),0)}}}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[null!==p.error&&Object(s.jsx)("b",{children:"Error: "}),null!==p.value&&Object(s.jsx)("b",{children:"Result: "}),p.error||p.value]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("b",{children:"Expression values:"})," ",Object(s.jsx)("br",{}),Object(s.jsx)("ul",{children:n.map((function(e,t){return Object(s.jsx)("li",{children:Object(s.jsx)("code",{children:JSON.stringify(e)})},"".concat(e.name+t))}))})]})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),i(e),a(e),o(e)}))};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)($,{})}),document.getElementById("root")),J()}},[[50,1,2]]]);
//# sourceMappingURL=main.a747eccf.chunk.js.map