(this["webpackJsonpcalculator-proto"]=this["webpackJsonpcalculator-proto"]||[]).push([[0],{36:function(t,e,s){},40:function(t,e,s){},41:function(t,e,s){},49:function(t,e){},50:function(t,e,s){"use strict";s.r(e);var n=s(1),i=s(0),a=s.n(i),o=s(7),r=s.n(o),u=(s(36),s(4)),c=s(3),l=s(8),p=s(16),h=s(11),d=s(10),g=s(19),f=s(18),b=s(29),j=(s(40),function(t){return Object(n.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,textAlign:"center"},children:[Object(n.jsx)("li",{children:"Insert:"}),Object(n.jsxs)("li",{style:{paddingBottom:5},children:[Object(n.jsx)("button",{onClick:t.onInsertLeft,children:"Left"}),Object(n.jsx)("button",{onClick:t.onInsertRight,children:"Right"})]}),Object(n.jsx)("li",{children:"Modify:"}),Object(n.jsxs)("li",{children:[Object(n.jsx)("button",{onClick:t.onEdit,children:"Edit"}),Object(n.jsx)("button",{onClick:t.onDelete,children:"Delete"})]})]})}),m=function(t){return Object(n.jsx)(b.a,{placement:"top",trigger:["click","focus"],overlay:j(t),destroyTooltipOnHide:{keepParent:!1},children:Object(n.jsx)("button",{type:"button",className:t.classNames.selectedTag,style:"dv"===t.tag.type?{backgroundColor:"#e6cfe4"}:{},title:t.editButtonText,children:Object(n.jsx)("span",{style:{pointerEvents:"none"},className:t.classNames.selectedTagName,children:t.tag.name})})})},v={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},x=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform"],O=function(t){Object(g.a)(s,t);var e=Object(f.a)(s);function s(t){var n;return Object(p.a)(this,s),(n=e.call(this,t)).state={inputWidth:null},n.input=a.a.createRef(),n.sizer=a.a.createRef(),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth())}},{key:"componentDidUpdate",value:function(t){var e=t.query,s=t.placeholder;e===this.props.query&&s===this.props.placeholder||this.updateInputWidth()}},{key:"copyInputStyles",value:function(){var t=this,e=window.getComputedStyle(this.input.current);x.forEach((function(s){t.sizer.current.style[s]=e[s]}))}},{key:"updateInputWidth",value:function(){var t;this.props.autoresize&&(t=Math.ceil(this.sizer.current.scrollWidth)+2),t!==this.state.inputWidth&&this.setState({inputWidth:t})}},{key:"render",value:function(){var t=this.props,e=t.id,s=t.query,i=t.ariaLabelText,a=t.placeholderText,o=t.expanded,r=t.classNames,c=t.inputAttributes,l=t.inputEventHandlers,p=t.index;return Object(n.jsxs)("div",{className:r.searchWrapper,children:[Object(n.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({},c),l),{},{ref:this.input,value:s,placeholder:a,className:r.searchInput,role:"combobox","aria-autocomplete":"list","aria-label":i||a,"aria-owns":e,"aria-activedescendant":p>-1?"".concat(e,"-").concat(p):null,"aria-expanded":o,style:{width:this.state.inputWidth}})),Object(n.jsx)("div",{ref:this.sizer,style:v,children:s||a})]})}}]),s}(a.a.Component);function y(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function T(t,e){var s=new RegExp(y(e),"gi");return t.replace(s,"<mark>$&</mark>")}var k=function(t){var e=t.item,s=t.query;return Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:T(e.name,s)}})},P=function(t){Object(g.a)(s,t);var e=Object(f.a)(s);function s(){return Object(p.a)(this,s),e.apply(this,arguments)}return Object(d.a)(s,[{key:"onMouseDown",value:function(t,e){e.preventDefault(),this.props.addTag(t)}},{key:"render",value:function(){var t=this;if(!this.props.expanded||!this.props.options.length)return null;var e=this.props.suggestionComponent||k,s=this.props.options.map((function(s,i){var a="".concat(t.props.id,"-").concat(i),o=[];return t.props.index===i&&o.push(t.props.classNames.suggestionActive),s.disabled&&o.push(t.props.classNames.suggestionDisabled),Object(n.jsxs)("li",{id:a,role:"option",className:o.join(" "),"aria-disabled":!0===s.disabled,onMouseDown:t.onMouseDown.bind(t,s),children:[s.prefix?Object(n.jsx)("span",{className:t.props.classNames.suggestionPrefix,children:s.prefix}):null,s.disableMarkIt?s.name:Object(n.jsx)(e,{item:s,query:t.props.query})]},a)}));return Object(n.jsx)("div",{className:this.props.classNames.suggestions,children:Object(n.jsx)("ul",{role:"listbox",id:this.props.id,children:s})})}}]),s}(a.a.Component),I="Enter",S="Tab",w="Backspace",N="ArrowUp",C="Up",q="ArrowDown",D="Down",E="ArrowLeft",A="ArrowRight",B="Escape";function _(t,e){return t.findIndex((function(t){return(s=e,new RegExp("^".concat(y(s),"$"),"i")).test(t.name);var s}))}function F(){if(this.state.query.length>=this.props.minQueryLength){var t=_(this.state.options,this.state.query),e=-1===this.state.index?t:this.state.index;e>-1&&this.state.options[e]?this.addTag(this.state.options[e]):this.props.allowNew&&this.addTag({name:this.state.query}),this.state.inputPosition>-1&&!this.state.isInsertion&&this.onBlur()}}function L(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index<=0?e:this.state.index-1})}function R(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index>=e?0:this.state.index+1})}function W(){var t=this;this.state.query.length||(-1===this.state.inputPosition?this.deleteTag(this.props.tags.length-1):this.state.inputPosition>0&&this.state.isInsertion&&(this.deleteTag(this.state.inputPosition-1),this.setState({inputPosition:this.state.inputPosition-1},(function(){t.input.current.input.current.focus()}))))}function z(){-1!==this.state.inputPosition&&this.onBlur()}function M(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=0;-1===this.state.inputPosition?e=this.props.tags.length-1:this.state.inputPosition>0&&(e=this.state.inputPosition-1),this.setState({inputPosition:e,isInsertion:!0},(function(){t.input.current.input.current.focus()}))}}function H(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=-1;-1===this.state.inputPosition||this.state.inputPosition+1===this.props.tags.length?e=-1:this.state.inputPosition<this.props.tags.length-1&&(e=this.state.inputPosition+1),this.setState({inputPosition:e,isInsertion:-1!==e},(function(){t.input.current.input.current.focus()}))}}function Q(t,e){var s;return 0===(s=t.suggestionsTransform?t.suggestionsTransform(e.query,t.suggestions):t.suggestions.filter((function(s){return t.suggestionsFilter(s,e.query)}))).length&&t.noSuggestionsText&&!t.newTagPrefix&&s.push({id:0,name:t.noSuggestionsText,disabled:!0,disableMarkIt:!0}),s=s.slice(0,t.maxSuggestionsLength),t.allowNew&&t.newTagPrefix&&_(s,e.query)<0&&s.push({id:0,name:e.query,prefix:t.newTagPrefix}),s}var V=function(t){Object(g.a)(s,t);var e=Object(f.a)(s);function s(t){var n;return Object(p.a)(this,s),(n=e.call(this,t)).state={query:"",focused:!1,index:-1,inputPosition:-1,isInsertion:!1},n.inputEventHandlers={onChange:function(){},onBlur:n.onBlur.bind(Object(h.a)(n)),onFocus:n.onFocus.bind(Object(h.a)(n)),onInput:n.onInput.bind(Object(h.a)(n)),onKeyDown:n.onKeyDown.bind(Object(h.a)(n))},n.container=a.a.createRef(),n.input=a.a.createRef(),n.suggestions=a.a.createRef(),n}return Object(d.a)(s,null,[{key:"getDerivedStateFromProps",value:function(t,e){return e.prevQuery!==e.query||e.prevSuggestions!==t.suggestions?{prevQuery:e.query,prevSuggestions:t.suggestions,options:Q(t,e),autocompletion:t.suggestions.filter((function(t){return t.autocomplete}))}:null}}]),Object(d.a)(s,[{key:"componentDidUpdate",value:function(t,e){t.tags!==this.props.tags&&(this.input.current.input.current.focus(),0===this.props.tags.length&&this.setState({index:-1,inputPosition:-1,isInsertion:!1}))}},{key:"onInput",value:function(t){var e=this,s=t.target.value.trim();if(this.props.onInput&&this.props.onInput(),-1===this.state.inputPosition||this.state.isInsertion){var n=this.state.autocompletion.find((function(t){return s.includes(t.name)}));if(n){var i=s.replace(n.name,"").trim();if(n.name.length===s.length)if(this.state.isInsertion){var a=this.props.tags;a.splice(this.state.inputPosition,0,n),this.props.addTags(Object(c.a)(a)),this.setState({inputPosition:this.state.inputPosition+1})}else this.props.addTags([].concat(Object(c.a)(this.props.tags),[n]));else if(this.props.validation(i))if(this.state.isInsertion){var o=this.props.tags;o.splice(this.state.inputPosition,0,{name:i},n),this.props.addTags(Object(c.a)(o)),this.setState({inputPosition:this.state.inputPosition+2})}else this.props.addTags([].concat(Object(c.a)(this.props.tags),[{name:i},n]));else this.props.onError(i);setTimeout((function(){e.clearInput()}),0)}}s.length===this.state.query.length+1&&this.props.delimiters.indexOf(s.slice(-1))>-1?F.call(this):s!==this.state.query&&this.setState({query:s})}},{key:"onKeyDown",value:function(t){this.props.delimiters.indexOf(t.key)>-1&&((this.state.query||this.state.index>-1)&&t.preventDefault(),F.call(this)),t.key===w&&this.props.allowBackspace&&W.call(this,t),t.key!==N&&t.key!==C||L.call(this,t),t.key!==q&&t.key!==D||R.call(this,t),t.key===B&&z.call(this,t),t.key===E&&M.call(this,t),t.key===A&&H.call(this,t)}},{key:"onClick",value:function(t){document.activeElement!==t.target&&this.input.current.input.current.focus()}},{key:"onBlur",value:function(){var t=this;this.setState({focused:!1,index:-1}),this.props.onBlur&&this.props.onBlur(),this.props.addOnBlur&&F.call(this),-1!==this.state.inputPosition&&(String(this.props.tags[this.state.inputPosition].name)!==String(this.state.query)&&""!==String(this.state.query).trim()?this.addTag({name:this.state.query}):this.setState({inputPosition:-1,isInsertion:!1},(function(){t.clearInput()})))}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"onDeleteTag",value:function(t,e){if(this.container.current){var s=this.container.current.querySelectorAll("a,button,input"),n=Array.prototype.findIndex.call(s,(function(t){return t===e.currentTarget})),i=s[n-1]||s[n+1];i&&i.focus()}this.deleteTag(t)}},{key:"addTag",value:function(t){if(!t.disabled&&("function"!==typeof this.props.onValidate||this.props.onValidate(t))){-1!==this.state.inputPosition&&(this.state.isInsertion?this.setState({inputPosition:this.state.inputPosition+1}):this.setState({inputPosition:-1}));var e=t.name.trim();if(t.id||this.props.validation(e))if(this.state.inputPosition>-1){var s=this.props.tags;s.splice(this.state.inputPosition,this.state.isInsertion?0:1,Object(u.a)(Object(u.a)({},t),{},{name:e})),this.props.addTags(Object(c.a)(s))}else this.props.addTags([].concat(Object(c.a)(this.props.tags),[Object(u.a)(Object(u.a)({},t),{},{name:e})]));else this.props.onError(e);this.props.onAddition&&this.props.onAddition(t,this.state.inputPosition,this.state.isInsertion),this.clearInput()}}},{key:"deleteTag",value:function(t){var e=this.props.tags;e.splice(t,1),this.props.addTags(Object(c.a)(e)),this.props.onDelete&&this.props.onDelete(t)}},{key:"clearInput",value:function(){this.setState({query:"",index:-1})}},{key:"onInsert",value:function(t){var e=this;this.setState({query:"",inputPosition:this.props.tags.length<=t?-1:t,isInsertion:this.props.tags.length>=t},(function(){e.input.current.input.current.focus()}))}},{key:"onEditTag",value:function(t){var e=this;this.setState({query:this.props.tags[t].name,inputPosition:t},(function(){e.input.current.input.current.focus()}))}},{key:"renderInput",value:function(t){var e=this.state.focused&&this.state.query.length>=this.props.minQueryLength;return Object(n.jsxs)("div",{className:this.props.classNames.search,children:[Object(n.jsx)(O,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.input,classNames:this.props.classNames,inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,autoresize:this.props.autoresize,expanded:e,placeholderText:this.props.placeholderText,ariaLabelText:this.props.ariaLabelText})),Object(n.jsx)(P,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.suggestions,classNames:this.props.classNames,expanded:e,addTag:this.addTag.bind(this),suggestionComponent:this.props.suggestionComponent}))]},t)}},{key:"renderTagComponent",value:function(t,e){var s=this.props.tagComponent||m;return Object(n.jsx)(s,{tag:t,editButtonText:this.props.editButtonText,classNames:this.props.classNames,onDelete:this.onDeleteTag.bind(this,e),onEdit:this.onEditTag.bind(this,e),onInsertLeft:this.onInsert.bind(this,e),onInsertRight:this.onInsert.bind(this,e+1)},e)}},{key:"render",value:function(){var t=this,e=[this.props.classNames.root];return this.state.focused&&e.push(this.props.classNames.rootFocused),Object(n.jsxs)("div",{ref:this.container,className:e.join(" "),onClick:this.onClick.bind(this),children:[Object(n.jsx)("div",{className:this.props.classNames.selected,"aria-relevant":"additions removals","aria-live":"polite",children:this.props.tags.map((function(e,s){return t.state.inputPosition===s&&t.state.isInsertion?Object(n.jsxs)(i.Fragment,{children:[t.renderInput(),t.renderTagComponent(e)]},s):-1===t.state.inputPosition?t.renderTagComponent(e,s):t.state.inputPosition===s?t.renderInput(s):t.renderTagComponent(e,s)}))}),this.state.inputPosition<0&&this.renderInput()]})}}]),s}(a.a.Component);V.defaultProps={id:"ReactTags",tags:[],placeholderText:" ",editButtonText:"Click to edit value",noSuggestionsText:null,suggestions:[],suggestionsFilter:function(t,e){return new RegExp("(?:^|\\s)".concat(y(e)),"i").test(t.name)},suggestionsTransform:null,autoresize:!0,classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchWrapper:"react-tags__search-wrapper",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled",suggestionPrefix:"react-tags__suggestion-prefix"},delimiters:[S,I],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,newTagPrefix:null,allowBackspace:!0,addOnBlur:!1,tagComponent:null,suggestionComponent:null,inputAttributes:{}};var $=V,U=s(52),J=(s(41),function(t){return RegExp(/^[+-]?\d+(\.\d+)?$/).test(t)}),K=[{id:1,name:"(",autocomplete:!0},{id:2,name:")",autocomplete:!0},{id:3,name:"+",autocomplete:!0},{id:4,name:"-",autocomplete:!0},{id:5,name:"*",autocomplete:!0},{id:6,name:"/",autocomplete:!0},{id:7,name:"^",autocomplete:!0},{id:8,name:"sqrt("}],G=function(){var t=Object(i.useState)([]),e=Object(l.a)(t,2),s=e[0],a=e[1],o=Object(i.useState)({error:null,value:null}),r=Object(l.a)(o,2),p=r[0],h=r[1],d=Object(i.useState)([]),g=Object(l.a)(d,2),f=g[0],b=g[1],j=Object(i.useState)({name:"",value:""}),m=Object(l.a)(j,2),v=m[0],x=m[1];Object(i.useEffect)((function(){var t=s.map((function(t){return t.defaultValue||t.name}));try{var e=Object(U.a)(t.join("")).compile();h({value:e.evaluate(),error:null})}catch(n){h({value:null,error:n.message})}}),[s]);var O=function(t){return function(e){var n=t.find((function(t){return String(t.id)===String(e.target.value)}));if(n){var i=n.name.trim();n.id||J(n)?a([].concat(Object(c.a)(s),[Object(u.a)(Object(u.a)({},n),{},{name:i})])):y(i)}}},y=function(t){h({value:null,error:'"'.concat(t,'" input is not allowed. Numbers (integers/floats) only.')})};return Object(n.jsxs)("div",{className:"App-cont",children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Add dynamic variable:"}),Object(n.jsx)("input",{value:v.name,type:"text",placeholder:"name",onChange:function(t){x((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:t.target.value})}))}}),Object(n.jsx)("input",{value:v.value,type:"text",placeholder:"value",onChange:function(t){x((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:t.target.value})}))}}),Object(n.jsx)("button",{onClick:function(){b((function(t){return[].concat(Object(c.a)(t),[{id:Date.now(),name:v.name,defaultValue:v.value,type:"dv"}])})),x({name:"",value:""})},children:"Add"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{children:"Calculator node:"}),Object(n.jsxs)("div",{children:["Add \xa0",Object(n.jsxs)("select",{value:"default",name:"operations",onChange:O(K),children:[Object(n.jsx)("option",{value:"default",disabled:!0,children:"Operations"}),K.map((function(t){return Object(n.jsx)("option",{value:t.id,children:t.name},t.id)}))]}),0!==f.length&&Object(n.jsxs)("select",{value:"default",name:"variables",onChange:O(f),children:[Object(n.jsx)("option",{value:"default",disabled:!0,children:"Variables"}),f.map((function(t){return Object(n.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object(n.jsx)("br",{}),Object(n.jsx)($,{allowNew:!0,minQueryLength:1,suggestions:[].concat(K,Object(c.a)(f)),tags:s,addTags:a,validation:J,onError:y}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[null!==p.error&&Object(n.jsx)("b",{children:"Error: "}),null!==p.value&&Object(n.jsx)("b",{children:"Result: "}),p.error||p.value]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Expression values:"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("ul",{children:s.map((function(t,e){return Object(n.jsx)("li",{children:Object(n.jsx)("code",{children:JSON.stringify(t)})},"".concat(t.name+e))}))})]})]})},X=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,53)).then((function(e){var s=e.getCLS,n=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;s(t),n(t),i(t),a(t),o(t)}))};r.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),X()}},[[50,1,2]]]);
//# sourceMappingURL=main.cda20f3d.chunk.js.map