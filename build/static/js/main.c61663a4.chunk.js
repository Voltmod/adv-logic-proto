(this["webpackJsonpcalculator-proto"]=this["webpackJsonpcalculator-proto"]||[]).push([[0],{36:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},49:function(t,e){},50:function(t,e,n){"use strict";n.r(e);var s=n(1),i=n(0),a=n.n(i),o=n(7),r=n.n(o),u=(n(36),n(4)),c=n(3),l=n(8),p=n(15),h=n(16),d=n(10),g=n(19),b=n(18),f=n(29),j=(n(40),function(t){return Object(s.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,textAlign:"center"},children:[Object(s.jsx)("li",{children:"Insert:"}),Object(s.jsxs)("li",{style:{paddingBottom:5},children:[Object(s.jsx)("button",{onClick:t.onInsertLeft,children:"Left"}),Object(s.jsx)("button",{onClick:t.onInsertRight,children:"Right"})]}),Object(s.jsx)("li",{children:"Modify:"}),Object(s.jsxs)("li",{children:[Object(s.jsx)("button",{onClick:t.onEdit,children:"Edit"}),Object(s.jsx)("button",{onClick:t.onDelete,children:"Delete"})]})]})}),m=function(t){return Object(s.jsx)(f.a,{placement:"top",trigger:["click","focus"],overlay:j(t),destroyTooltipOnHide:{keepParent:!1},children:Object(s.jsx)("button",{type:"button",className:t.classNames.selectedTag,style:"dv"===t.tag.type?{backgroundColor:"#e6cfe4"}:{},title:t.editButtonText,children:Object(s.jsx)("span",{style:{pointerEvents:"none"},className:t.classNames.selectedTagName,children:t.tag.name})})})},v={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},x=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform"],O=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).state={inputWidth:null},s.input=a.a.createRef(),s.sizer=a.a.createRef(),s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth())}},{key:"componentDidUpdate",value:function(t){var e=t.query,n=t.placeholder;e===this.props.query&&n===this.props.placeholder||this.updateInputWidth()}},{key:"copyInputStyles",value:function(){var t=this,e=window.getComputedStyle(this.input.current);x.forEach((function(n){t.sizer.current.style[n]=e[n]}))}},{key:"updateInputWidth",value:function(){var t;this.props.autoresize&&(t=Math.ceil(this.sizer.current.scrollWidth)+2),t!==this.state.inputWidth&&this.setState({inputWidth:t})}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.query,i=t.ariaLabelText,a=t.placeholderText,o=t.expanded,r=t.classNames,c=t.inputAttributes,l=t.inputEventHandlers,p=t.index;return Object(s.jsxs)("div",{className:r.searchWrapper,children:[Object(s.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({},c),l),{},{ref:this.input,value:n,placeholder:a,className:r.searchInput,role:"combobox","aria-autocomplete":"list","aria-label":i||a,"aria-owns":e,"aria-activedescendant":p>-1?"".concat(e,"-").concat(p):null,"aria-expanded":o,style:{width:this.state.inputWidth}})),Object(s.jsx)("div",{ref:this.sizer,style:v,children:n||a})]})}}]),n}(a.a.Component);function y(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function T(t,e){var n=new RegExp(y(e),"gi");return t.replace(n,"<mark>$&</mark>")}var k=function(t){var e=t.item,n=t.query;return Object(s.jsx)("span",{dangerouslySetInnerHTML:{__html:T(e.name,n)}})},I=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"onMouseDown",value:function(t,e){e.preventDefault(),this.props.addTag(t,this.props.inputPosition)}},{key:"render",value:function(){var t=this;if(!this.props.expanded||!this.props.options.length)return null;var e=this.props.suggestionComponent||k,n=this.props.options.map((function(n,i){var a="".concat(t.props.id,"-").concat(i),o=[];return t.props.index===i&&o.push(t.props.classNames.suggestionActive),n.disabled&&o.push(t.props.classNames.suggestionDisabled),Object(s.jsxs)("li",{id:a,role:"option",className:o.join(" "),"aria-disabled":!0===n.disabled,onMouseDown:t.onMouseDown.bind(t,n),children:[n.prefix?Object(s.jsx)("span",{className:t.props.classNames.suggestionPrefix,children:n.prefix}):null,n.disableMarkIt?n.name:Object(s.jsx)(e,{item:n,query:t.props.query})]},a)}));return Object(s.jsx)("div",{className:this.props.classNames.suggestions,children:Object(s.jsx)("ul",{role:"listbox",id:this.props.id,children:n})})}}]),n}(a.a.Component),P="Enter",S="Tab",w="Backspace",N="ArrowUp",C="Up",q="ArrowDown",D="Down",E="ArrowLeft",A="ArrowRight",B="Escape";function _(t,e){return t.findIndex((function(t){return(n=e,new RegExp("^".concat(y(n),"$"),"i")).test(t.name);var n}))}function F(){if(this.state.query.length>=this.props.minQueryLength){var t=_(this.state.options,this.state.query),e=-1===this.state.index?t:this.state.index;e>-1&&this.state.options[e]?this.addTag(this.state.options[e],this.state.inputPosition,this.state.isInsertion):this.props.allowNew&&this.addTag({name:this.state.query},this.state.inputPosition,this.state.isInsertion),this.state.inputPosition>-1&&!this.state.isInsertion&&this.onBlur()}}function L(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index<=0?e:this.state.index-1})}function R(t){t.preventDefault();var e=this.state.options.length-1;this.setState({index:this.state.index>=e?0:this.state.index+1})}function W(){var t=this;this.state.query.length||(-1===this.state.inputPosition?this.deleteTag(this.props.tags.length-1):this.state.inputPosition>0&&this.state.isInsertion&&(this.deleteTag(this.state.inputPosition-1),this.setState({inputPosition:this.state.inputPosition-1},(function(){t.input.current.input.current.focus()}))))}function z(){-1!==this.state.inputPosition&&this.onBlur()}function M(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=0;-1===this.state.inputPosition?e=this.props.tags.length-1:this.state.inputPosition>0&&(e=this.state.inputPosition-1),this.setState({inputPosition:e,isInsertion:!0},(function(){t.input.current.input.current.focus()}))}}function H(){var t=this;if(""===this.state.query&&this.props.tags.length>0){var e=-1;-1===this.state.inputPosition||this.state.inputPosition+1===this.props.tags.length?e=-1:this.state.inputPosition<this.props.tags.length-1&&(e=this.state.inputPosition+1),this.setState({inputPosition:e,isInsertion:-1!==e},(function(){t.input.current.input.current.focus()}))}}function Q(t,e){var n;return 0===(n=t.suggestionsTransform?t.suggestionsTransform(e.query,t.suggestions):t.suggestions.filter((function(n){return t.suggestionsFilter(n,e.query)}))).length&&t.noSuggestionsText&&!t.newTagPrefix&&n.push({id:0,name:t.noSuggestionsText,disabled:!0,disableMarkIt:!0}),n=n.slice(0,t.maxSuggestionsLength),t.allowNew&&t.newTagPrefix&&_(n,e.query)<0&&n.push({id:0,name:e.query,prefix:t.newTagPrefix}),n}var V=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).state={query:"",focused:!1,index:-1,inputPosition:-1,isInsertion:!1},s.inputEventHandlers={onChange:function(){},onBlur:s.onBlur.bind(Object(d.a)(s)),onFocus:s.onFocus.bind(Object(d.a)(s)),onInput:s.onInput.bind(Object(d.a)(s)),onKeyDown:s.onKeyDown.bind(Object(d.a)(s))},s.container=a.a.createRef(),s.input=a.a.createRef(),s.suggestions=a.a.createRef(),s}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(t,e){t.tags!==this.props.tags&&(this.input.current.input.current.focus(),0===this.props.tags.length&&this.setState({index:-1,inputPosition:-1,isInsertion:!1}))}},{key:"onInput",value:function(t){var e=this,n=t.target.value;this.props.onInput&&(-1===this.state.inputPosition||this.state.isInsertion)&&this.props.onInput(n,this.state.inputPosition,this.state.isInsertion,(function(t){e.setState({inputPosition:t})})),n.length===this.state.query.length+1&&this.props.delimiters.indexOf(n.slice(-1))>-1?F.call(this):n!==this.state.query&&this.setState({query:n})}},{key:"onKeyDown",value:function(t){this.props.delimiters.indexOf(t.key)>-1&&((this.state.query||this.state.index>-1)&&t.preventDefault(),F.call(this)),t.key===w&&this.props.allowBackspace&&W.call(this,t),t.key!==N&&t.key!==C||L.call(this,t),t.key!==q&&t.key!==D||R.call(this,t),t.key===B&&z.call(this,t),t.key===E&&M.call(this,t),t.key===A&&H.call(this,t)}},{key:"onClick",value:function(t){document.activeElement!==t.target&&this.input.current.input.current.focus()}},{key:"onBlur",value:function(){var t=this;this.setState({focused:!1,index:-1}),this.props.onBlur&&this.props.onBlur(),this.props.addOnBlur&&F.call(this),-1!==this.state.inputPosition&&(String(this.props.tags[this.state.inputPosition].name)!==String(this.state.query)&&""!==String(this.state.query).trim()?this.addTag({name:this.state.query},this.state.inputPosition):this.setState({inputPosition:-1,isInsertion:!1},(function(){t.clearInput()})))}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"onDeleteTag",value:function(t,e){if(this.container.current){var n=this.container.current.querySelectorAll("a,button,input"),s=Array.prototype.findIndex.call(n,(function(t){return t===e.currentTarget})),i=n[s-1]||n[s+1];i&&i.focus()}this.deleteTag(t)}},{key:"addTag",value:function(t,e,n){t.disabled||("function"!==typeof this.props.onValidate||this.props.onValidate(t))&&(-1!==this.state.inputPosition&&(this.state.isInsertion?this.setState({inputPosition:this.state.inputPosition+1}):this.setState({inputPosition:-1})),this.props.onAddition(t,e,n),this.clearInput())}},{key:"deleteTag",value:function(t){this.props.onDelete(t)}},{key:"clearInput",value:function(){this.setState({query:"",index:-1})}},{key:"onInsert",value:function(t){var e=this;this.setState({query:"",inputPosition:this.props.tags.length<=t?-1:t,isInsertion:this.props.tags.length>=t},(function(){e.input.current.input.current.focus()}))}},{key:"onEditTag",value:function(t){var e=this;this.setState({query:this.props.tags[t].name,inputPosition:t},(function(){e.input.current.input.current.focus()}))}},{key:"renderInput",value:function(t){var e=this.state.focused&&this.state.query.length>=this.props.minQueryLength;return Object(s.jsxs)("div",{className:this.props.classNames.search,children:[Object(s.jsx)(O,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.input,classNames:this.props.classNames,inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,autoresize:this.props.autoresize,expanded:e,placeholderText:this.props.placeholderText,ariaLabelText:this.props.ariaLabelText})),Object(s.jsx)(I,Object(u.a)(Object(u.a)({},this.state),{},{id:this.props.id,ref:this.suggestions,classNames:this.props.classNames,expanded:e,addTag:this.addTag.bind(this),suggestionComponent:this.props.suggestionComponent}))]},t)}},{key:"renderTagComponent",value:function(t,e){var n=this.props.tagComponent||m;return Object(s.jsx)(n,{tag:t,editButtonText:this.props.editButtonText,classNames:this.props.classNames,onDelete:this.onDeleteTag.bind(this,e),onEdit:this.onEditTag.bind(this,e),onInsertLeft:this.onInsert.bind(this,e),onInsertRight:this.onInsert.bind(this,e+1)},e)}},{key:"render",value:function(){var t=this,e=[this.props.classNames.root];return this.state.focused&&e.push(this.props.classNames.rootFocused),Object(s.jsxs)("div",{ref:this.container,className:e.join(" "),onClick:this.onClick.bind(this),children:[Object(s.jsx)("div",{className:this.props.classNames.selected,"aria-relevant":"additions removals","aria-live":"polite",children:this.props.tags.map((function(e,n){return t.state.inputPosition===n&&t.state.isInsertion?Object(s.jsxs)(i.Fragment,{children:[t.renderInput(),t.renderTagComponent(e)]},n):-1===t.state.inputPosition?t.renderTagComponent(e,n):t.state.inputPosition===n?t.renderInput(n):t.renderTagComponent(e,n)}))}),this.state.inputPosition<0&&this.renderInput()]})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return e.prevQuery!==e.query||e.prevSuggestions!==t.suggestions?{prevQuery:e.query,prevSuggestions:t.suggestions,options:Q(t,e)}:null}}]),n}(a.a.Component);V.defaultProps={id:"ReactTags",tags:[],placeholderText:"Add new value",editButtonText:"Click to edit value",noSuggestionsText:null,suggestions:[],suggestionsFilter:function(t,e){return new RegExp("(?:^|\\s)".concat(y(e)),"i").test(t.name)},suggestionsTransform:null,autoresize:!0,classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchWrapper:"react-tags__search-wrapper",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled",suggestionPrefix:"react-tags__suggestion-prefix"},delimiters:[S,P],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,newTagPrefix:null,allowBackspace:!0,addOnBlur:!1,tagComponent:null,suggestionComponent:null,inputAttributes:{}};var $=V,U=n(52),J=(n(41),[{id:1,name:"(",autocomplete:!0},{id:2,name:")",autocomplete:!0},{id:3,name:"+",autocomplete:!0},{id:4,name:"-",autocomplete:!0},{id:5,name:"*",autocomplete:!0},{id:6,name:"/",autocomplete:!0},{id:7,name:"^",autocomplete:!0},{id:8,name:"sqrt("}]),K=J.filter((function(t){return t.autocomplete})),G=function(){var t=Object(i.useState)([]),e=Object(l.a)(t,2),n=e[0],a=e[1],o=Object(i.useState)({error:null,value:null}),r=Object(l.a)(o,2),p=r[0],h=r[1],d=Object(i.useState)([]),g=Object(l.a)(d,2),b=g[0],f=g[1],j=Object(i.useState)({name:"",value:""}),m=Object(l.a)(j,2),v=m[0],x=m[1],O=Object(i.useRef)();Object(i.useEffect)((function(){var t=n.map((function(t){return t.defaultValue||t.name}));try{var e=Object(U.a)(t.join("")).compile();h({value:e.evaluate(),error:null})}catch(s){h({value:null,error:s.message})}}),[n]);var y=function(t){return RegExp(/^[+-]?\d+(\.\d+)?$/).test(t)},T=function(t,e,s){var i=t.name.trim();t.id||y(i)?e>-1?(n.splice(e,s?0:1,Object(u.a)(Object(u.a)({},t),{},{name:i})),a(Object(c.a)(n))):a([].concat(Object(c.a)(n),[Object(u.a)(Object(u.a)({},t),{},{name:i})])):h({value:null,error:'"'.concat(i,'" input is not allowed. Numbers (integers/floats) only.')})},k=function(t){return function(e){var n=t.find((function(t){return String(t.id)===String(e.target.value)}));n&&T(n)}};return Object(s.jsxs)("div",{className:"App-cont",children:[Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Add dynamic variable:"}),Object(s.jsx)("input",{value:v.name,type:"text",placeholder:"name",onChange:function(t){x((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:t.target.value})}))}}),Object(s.jsx)("input",{value:v.value,type:"text",placeholder:"value",onChange:function(t){x((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:t.target.value})}))}}),Object(s.jsx)("button",{onClick:function(){f((function(t){return[].concat(Object(c.a)(t),[{id:Date.now(),name:v.name,defaultValue:v.value,type:"dv"}])})),x({name:"",value:""})},children:"Add"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:"Calculator node:"}),Object(s.jsxs)("div",{children:["Add \xa0",Object(s.jsxs)("select",{value:"default",name:"operations",onChange:k(J),children:[Object(s.jsx)("option",{value:"default",disabled:!0,children:"Operations"}),J.map((function(t){return Object(s.jsx)("option",{value:t.id,children:t.name},t.id)}))]}),0!==b.length&&Object(s.jsxs)("select",{value:"default",name:"variables",onChange:k(b),children:[Object(s.jsx)("option",{value:"default",disabled:!0,children:"Variables"}),b.map((function(t){return Object(s.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object(s.jsx)("br",{}),Object(s.jsx)($,{allowNew:!0,minQueryLength:1,onAddition:T,onDelete:function(t){n.splice(t,1),a(Object(c.a)(n))},placeholderText:"Type an expression",ref:O,suggestions:[].concat(J,Object(c.a)(b)),tags:n,onInput:function(t,e,s,i){var o=t.trim(),r=K.find((function(t){return o.includes(t.name)}));if(r){var u=o.replace(r.name,"").trim();r.name.length===o.length?s?(i(e+1),n.splice(e,0,r),a(Object(c.a)(n))):a([].concat(Object(c.a)(n),[r])):y(u)?s?(i(e+2),n.splice(e,0,{name:u},r),a(Object(c.a)(n))):a([].concat(Object(c.a)(n),[{name:u},r])):h({value:null,error:'"'.concat(u,'" input is not allowed. Numbers (integers/floats) only.')}),setTimeout((function(){O.current.clearInput()}),0)}}}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[null!==p.error&&Object(s.jsx)("b",{children:"Error: "}),null!==p.value&&Object(s.jsx)("b",{children:"Result: "}),p.error||p.value]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("b",{children:"Expression values:"})," ",Object(s.jsx)("br",{}),Object(s.jsx)("ul",{children:n.map((function(t,e){return Object(s.jsx)("li",{children:Object(s.jsx)("code",{children:JSON.stringify(t)})},"".concat(t.name+e))}))})]})]})},X=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),s(t),i(t),a(t),o(t)}))};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(G,{})}),document.getElementById("root")),X()}},[[50,1,2]]]);
//# sourceMappingURL=main.c61663a4.chunk.js.map